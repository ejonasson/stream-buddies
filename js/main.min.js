function queryTwitch(queryUrl,successfunction,failfunction){Twitch.init({clientId:"cbmag59uju3vb9fevpi2de3pank5wtg"},function(){$.ajax({url:queryUrl,type:"GET",contentType:"application/json",dataType:"jsonp",cache:!0,error:function(){},success:function(data){404===data.status?failfunction():successfunction(data)}})})}function followsToPushStreams(data){var follows=data.follows;for(var i in follows){var streamArray=follows[i].channel;pushStreams(streamArray,resetChanged)}}function pushStreams(streamArray,updateChanged){var name=streamArray.name,userURL=streamUrl+name;$.ajax({url:userURL,type:"GET",contentType:"application/json",dataType:"jsonp",success:function(data){var streamObj={channelName:streamArray.name,viewerCount:viewerCount(data.stream),game:streamArray.game,status:streamArray.status,logo:streamArray.logo,logoid:streamArray.name+"-logo",display_name:streamArray.display_name,online:!1,already_loaded:!1,metaID:streamArray.name+"-meta",viewers:removeBadData(data.stream)};null!==data.stream&&(streamObj.online=!0);{var loaded=!1;"#"+streamObj.channelName}for(var i in loadedStreams)loadedStreams[i].channelName===streamObj.channelName&&(updateChanged(streamObj),loaded=!0);loaded||loadedStreams.push(streamObj)}})}function removeBadData(data){return null===data?0:data.viewers}function getQueryVariable(variable){for(var query=window.location.search.substring(1),vars=query.split("&"),i=0;i<vars.length;i++){var pair=vars[i].split("=");if(pair[0]==variable)return pair[1]}return!1}function findUser(){var queryname=getQueryVariable("name");return queryname?(state.haveName=!0,createCookie("name",queryname,14),queryname):readCookie("name")?queryname=readCookie("name"):($("#user-find").modal(),!1)}function createCookie(name,value,days){if(days){var date=new Date;date.setTime(date.getTime()+24*days*60*60*1e3);var expires="; expires="+date.toGMTString()}else var expires="";document.cookie=name+"="+value+expires+"; path=/"}function readCookie(name){for(var nameEQ=name+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(nameEQ))return c.substring(nameEQ.length,c.length)}return null}function viewerCount(data){if(null!==data){if(1==data.viewers){var string="1 viewer";return string}var viewString=data.viewers+" viewers";return viewString}return null}var state={showingStream:!1,toggleOverride:!1,haveName:!1},loadedStreams=[],theUser=findUser(),theURL="https://api.twitch.tv/kraken/",followsUrl=theURL+"users/"+theUser+"/follows/channels",streamUrl=theURL+"streams/",dimension={streamBoxWidth:315,streamChatWidth:325},error={notFound:"No Online Streams were found.",twitchError:"Twitch is taking longer than expected to respond. Try refreshing your browser.",invalidUser:"Error: We could not find a Twitch account by that name. Please check to make sure the name is spelled correctly.",enterStream:"Enter a Twitch ID to Get Started"};